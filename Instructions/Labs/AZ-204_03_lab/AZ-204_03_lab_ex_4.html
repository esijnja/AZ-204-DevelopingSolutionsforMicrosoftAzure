<article>
<h4><a id="user-content-task-1-enumerate-the-blobs-in-an-existing-container-by-using-the-sdk" class="anchor" aria-hidden="true" href="#task-1-enumerate-the-blobs-in-an-existing-container-by-using-the-sdk"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 1: Enumerate the blobs in an existing container by using the SDK</h4>
  <ol>
  <li>
  <p>In the <strong>Program</strong> class, create a new <strong>private static</strong> method named <strong>EnumerateBlobsAsync</strong> that's asynchronous and has two types of parameters, <strong>BlobServiceClient</strong> and <strong>string</strong>:</p>
  <pre><code>private static async Task EnumerateBlobsAsync(BlobServiceClient client, string containerName)
  {      
  }
  </code></pre>
  </li>
  <li>
  <p>In the <strong>EnumerateBlobsAsync</strong> method, get a new instance of the <strong>BlobContainerClient</strong> class by using the <strong>GetBlobContainerClient</strong> method of the <strong>BlobServiceClient</strong> class, passing in the <strong>containerName</strong> parameter:</p>
  <pre><code>BlobContainerClient container = client.GetBlobContainerClient(containerName);
  </code></pre>
  </li>
  <li>
  <p>In the <strong>EnumerateBlobsAsync</strong> method, render the name of the container that will be enumerated:</p>
  <pre><code>await Console.Out.WriteLineAsync($"Searching:\t{container.Name}");
  </code></pre>
  </li>
  <li>
  <p>In the <strong>EnumerateBlobsAsync</strong> method, create an asynchronous <strong>foreach</strong> loop that iterates over the results of an invocation of the <strong>GetBlobsAsync</strong> method of the <strong>BlobContainerClient</strong> class and prints out the name of each blob:</p>
  <pre><code>await foreach (BlobItem blob in container.GetBlobsAsync())
  {
      await Console.Out.WriteLineAsync($"Existing Blob:\t{blob.Name}");
  }
  </code></pre>
  </li>
  <li>
  <p>In the <strong>Main</strong> method, add a new line of code to create a variable named <em>existingContainerName</em> with a value of <strong>raster-graphics</strong>:</p>
  <pre><code>string existingContainerName = "raster-graphics";
  </code></pre>
  </li>
  <li>
  <p>In the <strong>Main</strong> method, add a new line of code to invoke the <strong>EnumerateBlobsAsync</strong> method, passing in the <em>serviceClient</em> and <em>existingContainerName</em> variables as parameters:</p>
  <pre><code>await EnumerateBlobsAsync(serviceClient, existingContainerName);
  </code></pre>
  </li>
  <li>
  <p>Save the&nbsp;<strong>Program.cs</strong>&nbsp;file.</p>
  </li>
  <li>
  <p>Using a terminal, run the console application project:</p>
  <pre><code>dotnet run
  </code></pre>
  <blockquote>
  <p><strong>Note</strong>: If there are any build errors, review the <strong>Program.cs</strong> file in the <strong>Allfiles (F):\Allfiles\Labs\03\Solution\BlobManager</strong> folder.</p>
  </blockquote>
  </li>
  <li>
  <p>Observe the output from the currently running console application. The updated output includes metadata about the existing container and blobs.</p>
  </li>
  <li>
  <p>Close the current terminal.</p>
  </li>
  </ol>
  <h4><a id="user-content-task-2-create-a-new-container-by-using-the-sdk" class="anchor" aria-hidden="true" href="#task-2-create-a-new-container-by-using-the-sdk"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 2: Create a new container by using the SDK</h4>
  <ol>
  <li>
  <p>In the <strong>Program</strong> class, create a new <strong>private static</strong> method named <strong>GetContainerAsync</strong> that's asynchronous and has two parameter types, <strong>BlobServiceClient</strong> and <strong>string</strong>:</p>
  <pre><code>private static async Task&lt;BlobContainerClient&gt; GetContainerAsync(BlobServiceClient client, string containerName)
  {      
  }
  </code></pre>
  </li>
  <li>
  <p>In the <strong>GetContainerAsync</strong> method, get a new instance of the <strong>BlobContainerClient</strong> class by using the <strong>GetBlobContainerClient</strong> method of the <strong>BlobServiceClient</strong> class, passing in the <strong>containerName</strong> parameter. Invoke the <strong>CreateIfNotExistsAsync</strong> method of the <strong>BlobContainerClient</strong> class:</p>
  <pre><code>BlobContainerClient container = client.GetBlobContainerClient(containerName);
  await container.CreateIfNotExistsAsync(PublicAccessType.Blob);
  </code></pre>
  </li>
  <li>
  <p>In the <strong>GetContainerAsync</strong> method, render the name of the container that was potentially created:</p>
  <pre><code>await Console.Out.WriteLineAsync($"New Container:\t{container.Name}");
  </code></pre>
  </li>
  <li>
  <p>Return the instance of the <strong>BlobContainerClient</strong> class named <strong>container</strong> as the result of the <strong>GetContainerAsync</strong> method:</p>
  <pre><code>return container;
  </code></pre>
  </li>
  <li>
  <p>In the <strong>Main</strong> method, add a new line of code to create a variable named <em>newContainerName</em> with a value of <strong>vector-graphics</strong>:</p>
  <pre><code>string newContainerName = "vector-graphics";
  </code></pre>
  </li>
  <li>
  <p>In the <strong>Main</strong> method, add a new line of code to invoke the <strong>GetContainerAsync</strong> method, passing in the <em>serviceClient</em> and <em>newContainerName</em> variables as parameters:</p>
  <pre><code>BlobContainerClient containerClient = await GetContainerAsync(serviceClient, newContainerName);
  </code></pre>
  </li>
  <li>
  <p>Save the&nbsp;<strong>Program.cs</strong>&nbsp;file.</p>
  </li>
  <li>
  <p>Using a terminal, run the console application project:</p>
  <pre><code>dotnet run
  </code></pre>
  <blockquote>
  <p><strong>Note</strong>: If there are any build errors, review the <strong>Program.cs</strong> file in the <strong>Allfiles (F):\Allfiles\Labs\03\Solution\BlobManager</strong> folder.</p>
  </blockquote>
  </li>
  <li>
  <p>Observe the output from the currently running console application. The updated output includes metadata about the new container and blobs.</p>
  </li>
  <li>
  <p>Close the current terminal.</p>
  </li>
  </ol>
  <h4><a id="user-content-task-3-upload-a-new-blob-by-using-the-portal" class="anchor" aria-hidden="true" href="#task-3-upload-a-new-blob-by-using-the-portal"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 3: Upload a new blob by using the portal</h4>
  <ol>
  <li>
  <p>Access the <em><em>mediastor</em>[yourname]</em>** storage account that you created earlier in this lab.</p>
  </li>
  <li>
  <p>Select the <strong>Containers</strong> link in the <strong>Blob service</strong> section, and then select the newly created <strong>vector-graphics</strong> container.</p>
  </li>
  <li>
  <p>In the <strong>vector-graphics</strong> container, select <strong>Upload</strong> to upload the <strong>graph.svg</strong> file in the <strong>Allfiles (F): \Allfiles\Labs\03\Starter\Images</strong> folder on your lab VM.</p>
  <blockquote>
  <p><strong>Note</strong>: We recommend that you enable the <strong>Overwrite if files already exist</strong> option.</p>
  </blockquote>
  </li>
  </ol>
  <h4><a id="user-content-task-4-access-blob-uri-by-using-the-sdk" class="anchor" aria-hidden="true" href="#task-4-access-blob-uri-by-using-the-sdk"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 4: Access blob URI by using the SDK</h4>
  <ol>
  <li>
  <p>In the <strong>Program</strong> class, create a new <strong>private static</strong> method named <strong>GetBlobAsync</strong> that's asynchronous and has two types of parameters, <strong>BlobContainerClient</strong> and <strong>string</strong>:</p>
  <pre><code>private static async Task&lt;BlobClient&gt; GetBlobAsync(BlobContainerClient client, string blobName)
  {      
  }
  </code></pre>
  </li>
  <li>
  <p>In the <strong>GetBlobAsync</strong> method, get a new instance of the <strong>BlobClient</strong> class by using the <strong>GetBlobClient</strong> method of the <strong>BlobContainerClient</strong> class, passing in the <strong>blobName</strong> parameter:</p>
  <pre><code>BlobClient blob = client.GetBlobClient(blobName);
  </code></pre>
  </li>
  <li>
  <p>In the <strong>GetBlobAsync</strong> method, render the name of the blob that was referenced:</p>
  <pre><code>await Console.Out.WriteLineAsync($"Blob Found:\t{blob.Name}");
  </code></pre>
  </li>
  <li>
  <p>Return the instance of the <strong>BlobClient</strong> class named <strong>blob</strong> as the result of the <strong>GetBlobAsync</strong> method:</p>
  <pre><code>return blob;
  </code></pre>
  </li>
  <li>
  <p>In the <strong>Main</strong> method, add a new line of code to create a variable named <em>uploadedBlobName</em> with a value of <strong>vector-graphics</strong>:</p>
  <pre><code>string uploadedBlobName = "graph.svg";
  </code></pre>
  </li>
  <li>
  <p>In the <strong>Main</strong> method, add a new line of code to invoke the <strong>GetBlobAsync</strong> method, passing in the <em>containerClient</em> and <em>uploadedBlobName</em> variables as parameters and store the result in a variable named <em>blobClient</em> of type <strong>BlobClient</strong>:</p>
  <pre><code>BlobClient blobClient = await GetBlobAsync(containerClient, uploadedBlobName);
  </code></pre>
  </li>
  <li>
  <p>In the <strong>Main</strong> method, add a new line of code to render the <strong>Uri</strong> property of the <em>blobClient</em> variable:</p>
  <pre><code>await Console.Out.WriteLineAsync($"Blob Url:\t{blobClient.Uri}");
  </code></pre>
  </li>
  <li>
  <p>Save the&nbsp;<strong>Program.cs</strong>&nbsp;file.</p>
  </li>
  <li>
  <p>Using a terminal, run the console application project:</p>
  <pre><code>dotnet run
  </code></pre>
  <blockquote>
  <p><strong>Note</strong>: If there are any build errors, review the <strong>Program.cs</strong> file in the <strong>Allfiles (F):\Allfiles\Labs\03\Solution\BlobManager</strong> folder.</p>
  </blockquote>
  </li>
  <li>
  <p>Observe the output from the currently running console application. The updated output includes the final URL to access the blob online. Record the value of this URL to use later in the lab.</p>
  <blockquote>
  <p><strong>Note</strong>: The URL will likely be similar to the following string: <strong><a href="https://mediastor*%5Byourname%5D*.blob.core.windows.net/vector-graphics/graph.svg" rel="nofollow">https://mediastor*[yourname]*.blob.core.windows.net/vector-graphics/graph.svg</a></strong></p>
  </blockquote>
  </li>
  <li>
  <p>Close the current terminal.</p>
  </li>
  </ol>
  <h4><a id="user-content-task-5-test-the-uri-by-using-a-browser" class="anchor" aria-hidden="true" href="#task-5-test-the-uri-by-using-a-browser"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 5: Test the URI by using a browser</h4>
  <ol>
  <li>
  <p>Using a new browser window or tab, go to the URL for the blob, and then find the blob's contents.</p>
  </li>
  <li>
  <p>You should now notice the Scalable Vector Graphics (SVG) file in your browser window.</p>
  </li>
  </ol>
  <h4><a id="user-content-review-3" class="anchor" aria-hidden="true" href="#review-3"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Review</h4>
  <p>In this exercise, you created containers and managed blobs by using the Storage SDK.</p>
  </article>