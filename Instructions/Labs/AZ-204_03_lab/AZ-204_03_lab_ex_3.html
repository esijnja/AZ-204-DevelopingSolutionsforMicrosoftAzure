<article>
<h4><a id="user-content-task-1-create-net-project" class="anchor" aria-hidden="true" href="#task-1-create-net-project"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 1: Create .NET project</h4>
  <ol>
  <li>
  <p>Using Visual Studio Code, open the <strong>Allfiles (F):\Allfiles\Labs\03\Starter\BlobManager</strong> folder.</p>
  </li>
  <li>
  <p>Using a terminal, create a new .NET project named <strong>BlobManager</strong> in the current folder:</p>
  <pre><code>dotnet new console --name BlobManager --output .
  </code></pre>
  <blockquote>
  <p><strong>Note</strong>: The <strong>dotnet new</strong> command will create a new <strong>console</strong> project in a folder with the same name as the project.</p>
  </blockquote>
  </li>
  <li>
  <p>Using the same terminal, import version 12.0.0 of <strong>Azure.Storage.Blobs</strong> from NuGet:</p>
  <pre><code>dotnet add package Azure.Storage.Blobs --version 12.0.0
  </code></pre>
  <blockquote>
  <p><strong>Note</strong>: The <strong>dotnet add package</strong> command will add the <strong>Azure.Storage.Blobs</strong> package from NuGet. For more information, go to <a href="https://www.nuget.org/packages/Azure.Storage.Blobs/12.0.0" rel="nofollow">Azure.Storage.Blobs</a>.</p>
  </blockquote>
  </li>
  <li>
  <p>Using the same terminal, build the .NET web application:</p>
  <pre><code>dotnet build
  </code></pre>
  </li>
  <li>
  <p>Close the current terminal.</p>
  </li>
  </ol>
  <h4><a id="user-content-task-2-modify-the-program-class-to-access-storage" class="anchor" aria-hidden="true" href="#task-2-modify-the-program-class-to-access-storage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 2: Modify the Program class to access Storage</h4>
  <ol>
  <li>
  <p>Open the <strong>Program.cs</strong> file in Visual Studio Code.</p>
  </li>
  <li>
  <p>Delete all existing code in the <strong>Program.cs</strong> file.</p>
  </li>
  <li>
  <p>Add the following <strong>using</strong> directives for libraries that will be referenced by the application:</p>
  <pre><code>using Azure.Storage;
  using Azure.Storage.Blobs;
  using Azure.Storage.Blobs.Models;
  using System;
  using System.Threading.Tasks;
  </code></pre>
  </li>
  <li>
  <p>Create a new <strong>Program</strong> class with three constant string properties named <strong>blobServiceEndpoint</strong>, <strong>storageAccountName</strong>, and <strong>storageAccountKey</strong>, and then create an asynchronous <strong>Main</strong> entry point method:</p>
  <pre><code>public class Program
  {
      private const string blobServiceEndpoint = "";
      private const string storageAccountName = "";
      private const string storageAccountKey = "";
      
      public static async Task Main(string[] args)
      {
      }
  }
  </code></pre>
  </li>
  <li>
  <p>Update the <strong>blobServiceEndpoint</strong> string constant by setting its value to the&nbsp;<strong>Primary Blob Service Endpoint</strong> of the storage account that you recorded earlier in this lab.</p>
  </li>
  <li>
  <p>Update the <strong>storageAccountName</strong> string constant by setting its value to the&nbsp;<strong>Storage account name</strong> of the Storage account that you recorded earlier in this lab.</p>
  </li>
  <li>
  <p>Update the <strong>storageAccountKey</strong> string constant by setting its value to the&nbsp;<strong>Key</strong> of the Storage account that you recorded earlier in this lab.</p>
  </li>
  </ol>
  <h4><a id="user-content-task-3-connect-to-the-azure-storage-blob-service-endpoint" class="anchor" aria-hidden="true" href="#task-3-connect-to-the-azure-storage-blob-service-endpoint"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 3: Connect to the Azure Storage blob service endpoint</h4>
  <ol>
  <li>
  <p>In the <strong>Main</strong> method, add the following block of code to connect to the storage account and to retrieve account metadata:</p>
  <pre><code>StorageSharedKeyCredential accountCredentials = new StorageSharedKeyCredential(storageAccountName, storageAccountKey);
  
  BlobServiceClient serviceClient = new BlobServiceClient(new Uri(blobServiceEndpoint), accountCredentials);
  
  AccountInfo info = await serviceClient.GetAccountInfoAsync();
  </code></pre>
  </li>
  <li>
  <p>Still in the <strong>Main</strong> method, add the following block of code to print metadata about the storage account:</p>
  <pre><code>await Console.Out.WriteLineAsync($"Connected to Azure Storage Account");
  await Console.Out.WriteLineAsync($"Account name:\t{storageAccountName}");
  await Console.Out.WriteLineAsync($"Account kind:\t{info?.AccountKind}");
  await Console.Out.WriteLineAsync($"Account sku:\t{info?.SkuName}");
  </code></pre>
  </li>
  <li>
  <p>Save the&nbsp;<strong>Program.cs</strong>&nbsp;file.</p>
  </li>
  <li>
  <p>Using a terminal, run the console application project:</p>
  <pre><code>dotnet run
  </code></pre>
  <blockquote>
  <p><strong>Note</strong>: If there are any build errors, review the <strong>Program.cs</strong> file in the <strong>Allfiles (F):\Allfiles\Labs\03\Solution\BlobManager</strong> folder.</p>
  </blockquote>
  </li>
  <li>
  <p>Observe the output from the currently running console application. The output contains metadata for the Storage account that was retrieved from the service.</p>
  </li>
  <li>
  <p>Close the current terminal.</p>
  </li>
  </ol>
  <h4><a id="user-content-task-4-enumerate-the-existing-containers" class="anchor" aria-hidden="true" href="#task-4-enumerate-the-existing-containers"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 4: Enumerate the existing containers</h4>
  <ol>
  <li>
  <p>In the <strong>Program</strong> class, create a new <strong>private static</strong> method named <strong>EnumerateContainersAsync</strong> that's asynchronous and has a single parameter of type <strong>BlobServiceClient</strong>:</p>
  <pre><code>private static async Task EnumerateContainersAsync(BlobServiceClient client)
  {        
  }
  </code></pre>
  </li>
  <li>
  <p>In the <strong>EnumerateContainersAsync</strong> method, create an asynchronous <strong>foreach</strong> loop that iterates over the results of an invocation of the <strong>GetBlobContainersAsync</strong> method of the <strong>BlobServiceClient</strong> class and prints out the name of each container:</p>
  <pre><code>await foreach (BlobContainerItem container in client.GetBlobContainersAsync())
  {
      await Console.Out.WriteLineAsync($"Container:\t{container.Name}");
  }
  </code></pre>
  </li>
  <li>
  <p>In the <strong>Main</strong> method, add a new line of code to invoke the <strong>EnumerateContainersAsync</strong> method, passing in the <em>serviceClient</em> variable as a parameter:</p>
  <pre><code>await EnumerateContainersAsync(serviceClient);
  </code></pre>
  </li>
  <li>
  <p>Save the&nbsp;<strong>Program.cs</strong>&nbsp;file.</p>
  </li>
  <li>
  <p>Using a terminal, run the console application project:</p>
  <pre><code>dotnet run
  </code></pre>
  <blockquote>
  <p><strong>Note</strong>: If there are any build errors, review the <strong>Program.cs</strong> file in the <strong>Allfiles (F):\Allfiles\Labs\03\Solution\BlobManager</strong> folder.</p>
  </blockquote>
  </li>
  <li>
  <p>Observe the output from the currently running console application. The updated output includes a list of every existing container in the account.</p>
  </li>
  <li>
  <p>Close the current terminal.</p>
  </li>
  </ol>
  <h4><a id="user-content-review-2" class="anchor" aria-hidden="true" href="#review-2"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Review</h4>
  <p>In this exercise, you accessed existing containers by using the Storage SDK.</p>
  </article>