<article class="markdown-body entry-content container-lg" itemprop="text"><table data-table-type="yaml-metadata">
    <thead>
    <tr>
    <th>lab</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td><div><table>
    <thead>
    <tr>
    <th>title</th>
    <th>az204Module</th>
    <th>az020Module</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td><div>Lab: Publishing and subscribing to Event Grid events</div></td>
    <td><div>Module 10: Develop event-based solutions</div></td>
    <td><div>Module 09: Develop event-based solutions</div></td>
    </tr>
    </tbody>
  </table>
  </div></td>
    </tr>
    </tbody>
  </table>
  
  <h1><a id="user-content-lab-publishing-and-subscribing-to-event-grid-events" class="anchor" aria-hidden="true" href="#lab-publishing-and-subscribing-to-event-grid-events"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Lab: Publishing and subscribing to Event Grid events</h1>
  <h1><a id="user-content-student-lab-manual" class="anchor" aria-hidden="true" href="#student-lab-manual"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Student lab manual</h1>
  <h2><a id="user-content-lab-scenario" class="anchor" aria-hidden="true" href="#lab-scenario"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Lab scenario</h2>
  <p>Your company builds a human resources (HR) system used by various customers around the world. While the system works fine today, your development managers have decided to begin re-architecting the solution by decoupling application components. This decision was driven by a desire to make any future development simpler through modularity. As the developer who manages component communication, you have decided to introduce Microsoft Azure Event Grid as your solution-wide messaging platform.</p>
  <h2><a id="user-content-objectives" class="anchor" aria-hidden="true" href="#objectives"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Objectives</h2>
  <p>After you complete this lab, you will be able to:</p>
  <ul>
  <li>
  <p>Create an Event Grid topic.</p>
  </li>
  <li>
  <p>Use the Azure Event Grid viewer to subscribe to a topic and illustrate published messages.</p>
  </li>
  <li>
  <p>Publish a message from a .NET application.</p>
  </li>
  </ul>
  <h2><a id="user-content-lab-setup" class="anchor" aria-hidden="true" href="#lab-setup"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Lab setup</h2>
  <ul>
  <li>Estimated time: <strong>45 minutes</strong></li>
  </ul>
  <h2><a id="user-content-instructions" class="anchor" aria-hidden="true" href="#instructions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Instructions</h2>
  <h3><a id="user-content-before-you-start" class="anchor" aria-hidden="true" href="#before-you-start"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Before you start</h3>
  <p>Make sure the following tools are installed on your machine</p>
  <ul>
  <li>Microsoft Edge</li>
  <li>Windows PowerShell</li>
  <li>Visual Studio Code</li>
  </ul>
  <h3><a id="user-content-make-an-f-drive" class="anchor" aria-hidden="true" href="#make-an-f-drive"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Make an F:\ drive:</h3>
  <p>There are two ways to create an F:\ with the content</p>
  <ol>
  <li>using VHD (virtual hard disk)</li>
  <li>using subst (map drive to a directory)</li>
  </ol>
  <h4><a id="user-content-make-an-f-drive-using-vhd" class="anchor" aria-hidden="true" href="#make-an-f-drive-using-vhd"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Make an F:\ drive using VHD</h4>
  <p>In order to create a VHD on Windows 10, do the following:</p>
  <ol>
  <li>Open Start.</li>
  <li>Search for Disk Management and click the top result to launch the experience.</li>
  <li>Click the Action button.</li>
  <li>Click the Create VHD option.</li>
  <li>Click the Browse button and locate the folder you want to store the virtual disk.</li>
  <li>In the "File name" field enter a name for the drive.</li>
  <li>Use the "Save as type file" drop-down menu and select Virtual Disk files (.vhdx) . Or select Virtual Disk files (.vhd) if you're planning to create a VHD file.</li>
  <li>Click the Save button.</li>
  <li>Under "Virtual hard disk size," specify the size of the drive in megabytes (MB), gigabytes (GB), or terabytes (TB).</li>
  <li>Under "Virtual hard disk format," select the VHDX option. (While using a VHDX format is recommended, you can also select the VHD format, but use it only if required.)</li>
  <li>Under "Virtual hard disk type," select the Dynamic expanding option. (If you have selected the VHD format in the previous step, it's recommended to select the Fixed size option when selecting a type.)</li>
  <li>Click OK.</li>
  </ol>
  <p>Once you complete these steps, you'll have created a VHD that you can then set up and use with any compatible version of Windows.</p>
  <h5><a id="user-content-how-to-set-up-a-vhdx-or-vhd-on-windows-10" class="anchor" aria-hidden="true" href="#how-to-set-up-a-vhdx-or-vhd-on-windows-10"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How to set up a VHDX or VHD on Windows 10</h5>
  <ol>
  <li>Using the above steps, you created a VHD, but it's empty without any data or file system. To make it useful, you need to initialize the disk, create a partition, and format the drive using these steps:</li>
  <li>Right-click the newly created drive button on the far-left side, and click the Initialize Disk option.</li>
  <li>Select the disk from the list.</li>
  <li>Check the MBR (Master Boot Record) option. (You could also select the "GPT (GUID Partition Table)" option, but this option isn't supported by all versions of Windows.)</li>
  <li>Click OK.</li>
  <li>Right-click the Unallocated space, and select the New Simple Volume option.</li>
  <li>Click Next.</li>
  <li>Specify the size of the partition. (Leave this option unchanged if you're planning to use all the available space for the partition.)</li>
  <li>Click Next.</li>
  <li>Using the drop-down menu, select the drive letter you want to assign to the drive.</li>
  <li>Click Next.</li>
  <li>Under the Format this volume with the following settings section, make sure to use the following options:
  <ul>
  <li>File System - NTFS.</li>
  <li>Allocation unit size - Default.</li>
  <li>Volume label - Use the name of the drive file, but you can enter any name.</li>
  <li>Perform a quick format - Formats the drive faster.</li>
  <li>Enable file and folder compression - If it's not required, don't select it (optional).</li>
  </ul>
  </li>
  <li>Click Next.</li>
  <li>Click Finish.</li>
  </ol>
  <p>After completing these steps, the VHDX or VHD will be initialized, partitioned, and formatted.
  The VHD will mount automatically, and you can now access and save files using File Explorer.</p>
  <h5><a id="user-content-make-sure-to-get-the-labs-source-and-instructions-from" class="anchor" aria-hidden="true" href="#make-sure-to-get-the-labs-source-and-instructions-from"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Make sure to get the labs source and instructions from</h5>
  <p><a href="https://github.com/betabitnl/AZ-204-DevelopingSolutionsforMicrosoftAzure">https://github.com/betabitnl/AZ-204-DevelopingSolutionsforMicrosoftAzure</a></p>
  <ol>
  <li>Click Code</li>
  <li>Click download zip</li>
  <li>Open zip</li>
  <li>Extra All file to F:\</li>
  </ol>
  <h4><a id="user-content-make-an-f-drive-using-subst" class="anchor" aria-hidden="true" href="#make-an-f-drive-using-subst"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Make an F:\ drive using subst</h4>
  <p>By making an F:\ drive using subst it is easier to keep the labs up-to-date with the Github Repo.</p>
  <h5><a id="user-content-clone-the-github-repo" class="anchor" aria-hidden="true" href="#clone-the-github-repo"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Clone the github repo:</h5>
  <p>In a command prompt goto the direcory where you what to clone the the Github repo into. And type the following command:</p>
  <p><code>git clone https://github.com/betabitnl/AZ-204-DevelopingSolutionsforMicrosoftAzure</code></p>
  <h5><a id="user-content-create-the-f-drive" class="anchor" aria-hidden="true" href="#create-the-f-drive"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Create the F:\ drive</h5>
  <p>For this example the Github is cloned in <code>c:\repos\</code>. To create the F:\ drive with correct content in it, type:</p>
  <p><code>subst f: c:\repos\AZ-204-DevelopingSolutionsforMicrosoftAzure</code></p>
  <h3><a id="user-content-exercise-1-create-azure-resources" class="anchor" aria-hidden="true" href="#exercise-1-create-azure-resources"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Exercise 1: Create Azure resources</h3>
  <h4><a id="user-content-task-1-open-the-azure-portal" class="anchor" aria-hidden="true" href="#task-1-open-the-azure-portal"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 1: Open the Azure portal</h4>
  <ol>
  <li>
  <p>Sign in to the Azure portal (<a href="https://portal.azure.com" rel="nofollow">https://portal.azure.com</a>).</p>
  </li>
  <li>
  <p>If this is your first time signing in to the Azure portal, you'll notice a dialog box offering a tour of the portal. Select <strong>Get Started</strong> to skip the tour.</p>
  </li>
  </ol>
  <h4><a id="user-content-task-2-open-azure-cloud-shell" class="anchor" aria-hidden="true" href="#task-2-open-azure-cloud-shell"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 2: Open Azure Cloud Shell</h4>
  <ol>
  <li>
  <p>Open a new Cloud Shell instance in the Azure portal.</p>
  </li>
  <li>
  <p>If Cloud Shell isn't already configured, configure the shell for Bash by using the default settings.</p>
  </li>
  <li>
  <p>At the <strong>Cloud Shell</strong> command prompt in the portal, use the <strong>az</strong> command with the <strong>--version</strong> flag to get the version of the Azure Command-Line Interface (Azure CLI) tool.</p>
  </li>
  </ol>
  <h4><a id="user-content-task-3-view-the-microsofteventgrid-provider-registration" class="anchor" aria-hidden="true" href="#task-3-view-the-microsofteventgrid-provider-registration"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 3: View the Microsoft.EventGrid provider registration</h4>
  <ol>
  <li>
  <p>Use the <strong>az</strong> command with the <strong>--help</strong> flag to find a list of subgroups and commands at the root level of the Azure CLI.</p>
  </li>
  <li>
  <p>Use the <strong>az provider</strong> command with the <strong>--help</strong> flag to get a list of commands available for resource providers.</p>
  </li>
  <li>
  <p>Use the <strong>az provider list</strong> command to get a list of all currently registered providers.</p>
  </li>
  <li>
  <p>Use the <strong>az provider list</strong> command again with the <strong>--query "[].namespace"</strong> flag to list just the namespaces of the currently registered providers.</p>
  </li>
  <li>
  <p>Review the list of currently registered providers. Note that the <strong>Microsoft.EventGrid</strong> provider is currently in the list of providers.</p>
  </li>
  <li>
  <p>Close the Cloud Shell pane.</p>
  </li>
  </ol>
  <h4><a id="user-content-task-4-create-a-custom-event-grid-topic" class="anchor" aria-hidden="true" href="#task-4-create-a-custom-event-grid-topic"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 4: Create a custom Event Grid topic</h4>
  <ol>
  <li>
  <p>Create a new Event Grid topic with the following details:</p>
  <ul>
  <li>
  <p>Name: <em><em>hrtopic</em>[yourname]</em>**</p>
  </li>
  <li>
  <p>New resource group: <strong>PubSubEvents</strong></p>
  </li>
  <li>
  <p>Location: <strong>West Europe</strong></p>
  </li>
  <li>
  <p>Event Schema: <strong>Event Grid Schema</strong></p>
  </li>
  </ul>
  <blockquote>
  <p><strong>Note</strong>: Wait for Azure to finish creating the topic before you continue with the lab. You'll receive a notification when the&nbsp;app&nbsp;is created.</p>
  </blockquote>
  </li>
  </ol>
  <h4><a id="user-content-task-5-deploy-the-azure-event-grid-viewer-to-a-web-app" class="anchor" aria-hidden="true" href="#task-5-deploy-the-azure-event-grid-viewer-to-a-web-app"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 5: Deploy the Azure Event Grid viewer to a web app</h4>
  <ol>
  <li>
  <p>Create a new web app with the following details:</p>
  <ul>
  <li>
  <p>Existing resource group: <strong>PubSubEvents</strong></p>
  </li>
  <li>
  <p>Name: <em><em>eventviewer</em>[yourname]</em>**</p>
  </li>
  <li>
  <p>Publish: <strong>Docker Container</strong></p>
  </li>
  <li>
  <p>Operating system: <strong>Linux</strong></p>
  </li>
  <li>
  <p>Region: <strong>West Europe</strong></p>
  </li>
  <li>
  <p>New App Service plan: <strong>EventPlan</strong></p>
  </li>
  <li>
  <p>SKU and size: <strong>Premium V2 P1v2</strong></p>
  </li>
  <li>
  <p>Docker options: <strong>Single Container</strong></p>
  </li>
  <li>
  <p>Image source: <strong>Docker Hub</strong></p>
  </li>
  <li>
  <p>Access type: <strong>Public</strong></p>
  </li>
  <li>
  <p>Image and tag: <strong>microsoftlearning/azure-event-grid-viewer:latest</strong></p>
  </li>
  </ul>
  <blockquote>
  <p><strong>Note</strong>: Wait for Azure to finish creating the web app before you continue with the lab. You'll receive a notification when the&nbsp;app&nbsp;is created.</p>
  </blockquote>
  </li>
  </ol>
  <h4><a id="user-content-review" class="anchor" aria-hidden="true" href="#review"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Review</h4>
  <p>In this exercise, you created the Event Grid topic and web app that you will use throughout the remainder of the lab.</p>
  <h3><a id="user-content-exercise-2-create-an-event-grid-subscription" class="anchor" aria-hidden="true" href="#exercise-2-create-an-event-grid-subscription"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Exercise 2: Create an Event Grid subscription</h3>
  <h4><a id="user-content-task-1-access-the-event-grid-viewer-web-application" class="anchor" aria-hidden="true" href="#task-1-access-the-event-grid-viewer-web-application"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 1: Access the Event Grid Viewer web application</h4>
  <ol>
  <li>
  <p>Access the <em><em>eventviewer</em>[yourname]</em>** web app that you created earlier in this lab.</p>
  </li>
  <li>
  <p>In the <strong>Settings</strong> section, go to the <strong>Properties</strong> section, and then record the value in the <strong>URL</strong> text box. You'll use this value later in the lab.</p>
  </li>
  <li>
  <p>Browse to the currently running web app.</p>
  </li>
  <li>
  <p>Observe the currently running <strong>Azure Event Grid viewer</strong> web application. Leave this web application running for the remainder of the lab.</p>
  <blockquote>
  <p><strong>Note</strong>: This web application will update in real-time as events are sent to its endpoint. We will use this to monitor events throughout the lab.</p>
  </blockquote>
  </li>
  <li>
  <p>Return to the Azure portal.</p>
  </li>
  </ol>
  <h4><a id="user-content-task-2-create-new-subscription" class="anchor" aria-hidden="true" href="#task-2-create-new-subscription"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 2: Create new subscription</h4>
  <ol>
  <li>
  <p>Access the <em><em>hrtopic</em>[yourname]</em>** Event Grid topic that you created earlier in this lab.</p>
  </li>
  <li>
  <p>Create a new <strong>Event Subscription</strong> with the following details:</p>
  <ul>
  <li>
  <p>Name: <strong>basicsub</strong></p>
  </li>
  <li>
  <p>Event Schema: <strong>Event Grid Schema</strong></p>
  </li>
  <li>
  <p>Endpoint Type: <strong>Web Hook</strong></p>
  </li>
  <li>
  <p>Endpoint: *<strong>Web App URL recorded earlier in the lab, with an <em>https://</em> prefix and an <em>/api/updates</em> suffix</strong></p>
  <blockquote>
  <p><strong>Note</strong>: For example, if your <strong>Web App URL</strong> value is <strong><a href="http://eventviewerstudent.azurewebsites.net/" rel="nofollow">http://eventviewerstudent.azurewebsites.net/</a></strong>, then your endpoint would be <strong><a href="https://eventviewerstudent.azurewebsites.net/api/updates" rel="nofollow">https://eventviewerstudent.azurewebsites.net/api/updates</a></strong>.</p>
  </blockquote>
  </li>
  </ul>
  <blockquote>
  <p><strong>Note</strong>: Wait for Azure to finish creating the subscription before you continue with the lab. You'll receive a notification when the&nbsp;app&nbsp;is created.</p>
  </blockquote>
  </li>
  </ol>
  <h4><a id="user-content-task-3-observe-the-subscription-validation-event" class="anchor" aria-hidden="true" href="#task-3-observe-the-subscription-validation-event"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 3: Observe the subscription validation event</h4>
  <ol>
  <li>
  <p>Return to Azure Event Grid viewer.</p>
  </li>
  <li>
  <p>Review the <strong>Microsoft.EventGrid.SubscriptionValidationEvent</strong> event that was created as part of the subscription creation process.</p>
  </li>
  <li>
  <p>Select the event and review its JSON content.</p>
  </li>
  <li>
  <p>Return to Azure portal.</p>
  </li>
  </ol>
  <h4><a id="user-content-task-4-record-subscription-credentials" class="anchor" aria-hidden="true" href="#task-4-record-subscription-credentials"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 4: Record subscription credentials</h4>
  <ol>
  <li>
  <p>Access the <em><em>hrtopic</em>[yourname]</em>** Event Grid topic that you created earlier in this lab.</p>
  </li>
  <li>
  <p>Record the value of the <strong>Topic Endpoint</strong> field. You'll use this value later in the lab.</p>
  </li>
  <li>
  <p>In the <strong>Settings</strong> section, go to the <strong>Access keys</strong> section, and then record the value in the <strong>Key 1</strong> text box. You'll use this value later in the lab.</p>
  </li>
  </ol>
  <h4><a id="user-content-review-1" class="anchor" aria-hidden="true" href="#review-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Review</h4>
  <p>In this exercise, you created a new subscription, validated its registration, and then recorded the credentials required to publish a new event to the topic.</p>
  <h3><a id="user-content-exercise-3-publish-event-grid-events-from-net" class="anchor" aria-hidden="true" href="#exercise-3-publish-event-grid-events-from-net"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Exercise 3: Publish Event Grid events from .NET</h3>
  <h4><a id="user-content-task-1-create-net-project" class="anchor" aria-hidden="true" href="#task-1-create-net-project"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 1: Create .NET project</h4>
  <ol>
  <li>
  <p>Using Visual Studio Code, open the <strong>Allfiles (F):\Allfiles\Labs\10\Starter\EventPublisher</strong> folder.</p>
  </li>
  <li>
  <p>Using a terminal, create a new .NET project named <strong>EventPublisher</strong> in the current folder:</p>
  <pre><code>dotnet new console --name EventPublisher --output .
  </code></pre>
  <blockquote>
  <p><strong>Note</strong>: The <strong>dotnet new</strong> command will create a new <strong>console</strong> project in a folder with the same name as the project.</p>
  </blockquote>
  </li>
  <li>
  <p>Using the same terminal, import version 3.2.0 of <strong>Microsoft.Azure.EventGrid</strong> from NuGet:</p>
  <pre><code>dotnet add package Microsoft.Azure.EventGrid --version 3.2.0
  </code></pre>
  <blockquote>
  <p><strong>Note</strong>: The <strong>dotnet add package</strong> command will add the <strong>Microsoft.Azure.EventGrid</strong> package from NuGet. For more information, go to <a href="https://www.nuget.org/packages/Microsoft.Azure.EventGrid/3.2.0" rel="nofollow">Microsoft.Azure.EventGrid</a>.</p>
  </blockquote>
  </li>
  <li>
  <p>Using the same terminal, build the .NET web application:</p>
  <pre><code>dotnet build
  </code></pre>
  </li>
  <li>
  <p>Close the current terminal.</p>
  </li>
  </ol>
  <h4><a id="user-content-task-2-modify-the-program-class-to-connect-to-event-grid" class="anchor" aria-hidden="true" href="#task-2-modify-the-program-class-to-connect-to-event-grid"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 2: Modify the Program class to connect to Event Grid</h4>
  <ol>
  <li>
  <p>Open the <strong>Program.cs</strong> file in Visual Studio Code.</p>
  </li>
  <li>
  <p>Delete all existing code in the <strong>Program.cs</strong> file.</p>
  </li>
  <li>
  <p>Add the following <strong>using</strong> directives for libraries that the application will reference:</p>
  <pre><code>using Microsoft.Azure.EventGrid;
  using Microsoft.Azure.EventGrid.Models;
  using System;
  using System.Collections.Generic;
  using System.Threading.Tasks;
  </code></pre>
  </li>
  <li>
  <p>Create a new <strong>Program</strong> class with two constant string properties named <strong>topicEndpoint</strong> and <strong>topicKey</strong>, and then create an asynchronous <strong>Main</strong> entry point method:</p>
  <pre><code>public class Program
  {
      private const string topicEndpoint = "";
      private const string topicKey = "";
      
      public static async Task Main(string[] args)
      {
      }
  }
  </code></pre>
  </li>
  <li>
  <p>Update the <strong>topicEndpoint</strong> string constant by setting its value to the&nbsp;<strong>Topic Endpoint</strong> of the Event Grid topic that you recorded earlier in this lab.</p>
  </li>
  <li>
  <p>Update the <strong>topicKey</strong> string constant by setting its value to the&nbsp;<strong>Key</strong> of the Event Grid topic that you recorded earlier in this lab.</p>
  </li>
  </ol>
  <h4><a id="user-content-task-3-publish-new-events" class="anchor" aria-hidden="true" href="#task-3-publish-new-events"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 3: Publish new events</h4>
  <ol>
  <li>
  <p>In the <strong>Main</strong> method, perform the following actions:</p>
  <ol>
  <li>
  <p>Add the following block of code to connect to the Event Grid using the credentials you specified earlier in the lab:</p>
  <pre><code>TopicCredentials credentials = new TopicCredentials(topicKey);
  EventGridClient client = new EventGridClient(credentials);
  </code></pre>
  </li>
  <li>
  <p>Create a new variable named <strong>events</strong>, of type <strong>List</strong>:</p>
  <pre><code>List&lt;EventGridEvent&gt; events = new List&lt;EventGridEvent&gt;();
  </code></pre>
  </li>
  <li>
  <p>Add the following block of code to: create two new variables named <strong>firstPerson</strong> of an anonymous type, and <strong>firstEvent</strong> of type <strong>EventGridEvent</strong>; populate the <strong>EventGridEvent</strong> variable with sample data; and add the <strong>firstEvent</strong> instance to your <strong>events</strong> list:</p>
  <pre><code>var firstPerson = new
  {
      FullName = "Alba Sutton",
      Address = "4567 Pine Avenue, Edison, WA 97202"
  };    
      
  EventGridEvent firstEvent = new EventGridEvent
  {
      Id = Guid.NewGuid().ToString(),
      EventType = "Employees.Registration.New",
      EventTime = DateTime.Now,
      Subject = $"New Employee: {firstPerson.FullName}",
      Data = firstPerson.ToString(),
      DataVersion = "1.0.0"
  };
  events.Add(firstEvent);
  </code></pre>
  </li>
  <li>
  <p>Add the following block of code to: create two new variables named <strong>secondPerson</strong> of an anonymous type, and <strong>secondEvent</strong> of type <strong>EventGridEvent</strong>; populate the <strong>EventGridEvent</strong> variable with sample data; and add the <strong>secondEvent</strong> instance to your <strong>events</strong> list:</p>
  <pre><code>var secondPerson = new
  {
      FullName = "Alexandre Doyon",
      Address = "456 College Street, Bow, WA 98107"
  };
  
  EventGridEvent secondEvent = new EventGridEvent
  {
      Id = Guid.NewGuid().ToString(),
      EventType = "Employees.Registration.New",
      EventTime = DateTime.Now,
      Subject = $"New Employee: {secondPerson.FullName}",
      Data = secondPerson.ToString(),
      DataVersion = "1.0.0"
  };
  events.Add(secondEvent);
  </code></pre>
  </li>
  <li>
  <p>Add the following block of code to obtain the <strong>Hostname</strong> from the <strong>topicEndpoint</strong> variable, and then use that hostname as a parameter to the <strong><a href="https://docs.microsoft.com/dotnet/api/microsoft.azure.eventgrid.eventgridclient.publisheventswithhttpmessagesasync" rel="nofollow">EventGridClient.PublishEventsAsync</a></strong> method invocation:</p>
  <pre><code>string topicHostname = new Uri(topicEndpoint).Host;
  await client.PublishEventsAsync(topicHostname, events);
  </code></pre>
  </li>
  <li>
  <p>Render the <strong>Events published</strong> message to the console:</p>
  <pre><code>Console.WriteLine("Events published");
  </code></pre>
  </li>
  </ol>
  </li>
  <li>
  <p>Save the&nbsp;<strong>Program.cs</strong>&nbsp;file.</p>
  </li>
  <li>
  <p>Using a terminal, run the .NET console application project:</p>
  <pre><code>dotnet run
  </code></pre>
  <blockquote>
  <p><strong>Note</strong>: If there are any build errors, review the <strong>Program.cs</strong> file in the <strong>Allfiles (F):\Allfiles\Labs\10\Solution\EventPublisher</strong> folder.</p>
  </blockquote>
  </li>
  <li>
  <p>Review the success message output from the currently running console application.</p>
  </li>
  <li>
  <p>Close the current terminal.</p>
  </li>
  </ol>
  <h4><a id="user-content-task-4-observe-published-events" class="anchor" aria-hidden="true" href="#task-4-observe-published-events"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 4: Observe published events</h4>
  <ol>
  <li>
  <p>Return to the browser window with the <strong>Azure Event Grid viewer</strong> web application.</p>
  </li>
  <li>
  <p>Review the <strong>Employees.Registration.New</strong> events that were created by your console application.</p>
  </li>
  <li>
  <p>Select any of the events and review its JSON content.</p>
  </li>
  <li>
  <p>Return to  Azure portal.</p>
  </li>
  </ol>
  <h4><a id="user-content-review-2" class="anchor" aria-hidden="true" href="#review-2"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Review</h4>
  <p>In this exercise, you published new events to your Event Grid topic using a .NET console application.</p>
  <h3><a id="user-content-exercise-4-clean-up-your-subscription" class="anchor" aria-hidden="true" href="#exercise-4-clean-up-your-subscription"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Exercise 4: Clean up your subscription</h3>
  <h4><a id="user-content-task-1-open-azure-cloud-shell" class="anchor" aria-hidden="true" href="#task-1-open-azure-cloud-shell"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 1: Open Azure Cloud Shell</h4>
  <ol>
  <li>
  <p>In the Azure portal, select the <strong>Cloud Shell</strong> icon to open a new shell instance.</p>
  </li>
  <li>
  <p>If Cloud Shell isn't already configured, configure the shell for Bash by using the default settings.</p>
  </li>
  </ol>
  <h4><a id="user-content-task-2-delete-resource-groups" class="anchor" aria-hidden="true" href="#task-2-delete-resource-groups"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 2: Delete resource groups</h4>
  <ol>
  <li>
  <p>Enter the following command, and then select Enter to delete the <strong>PubSubEvents</strong> resource group:</p>
  <pre><code>az group delete --name PubSubEvents --no-wait --yes
  </code></pre>
  </li>
  <li>
  <p>Close the Cloud Shell pane.</p>
  </li>
  </ol>
  <h4><a id="user-content-task-3-close-the-active-applications" class="anchor" aria-hidden="true" href="#task-3-close-the-active-applications"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 3: Close the active applications</h4>
  <ol>
  <li>
  <p>Close the currently running Microsoft Edge application.</p>
  </li>
  <li>
  <p>Close the currently running Visual Studio Code application.</p>
  </li>
  </ol>
  <h4><a id="user-content-review-3" class="anchor" aria-hidden="true" href="#review-3"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Review</h4>
  <p>In this exercise, you cleaned up your subscription by removing the resource groups used in this lab.</p>
  </article>