<article>
  <h4><a id="user-content-task-1-create-an-api-management-resource" class="anchor" aria-hidden="true" href="#task-1-create-an-api-management-resource"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 1: Create an API Management resource</h4>
  <ol>
  <li>
  <p>In the Azure portal, create a new API Management service instance with the following details:</p>
  <ul>
  <li>
  <p>Existing resource group: <strong>ApiService</strong></p>
  </li>
  <li>
  <p>Name: <em><em>prodapi</em>[yourname]</em>**</p>
  </li>
  <li>
  <p>Location: <strong>East US</strong></p>
  </li>
  <li>
  <p>Organization name: <strong>Contoso</strong></p>
  </li>
  <li>
  <p>Pricing tier: <strong>Consumption (99.9 SLA, %)</strong></p>
  </li>
  </ul>
  </li>
  </ol>
  <h4><a id="user-content-task-2-define-a-new-api" class="anchor" aria-hidden="true" href="#task-2-define-a-new-api"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 2: Define a new API</h4>
  <ol>
  <li>
  <p>Access the <em><em>prodapi</em>[yourname]</em>** API Management service instance that you created earlier in this lab.</p>
  </li>
  <li>
  <p>Create a new <strong>Blank API</strong> with the following details:</p>
  <ul>
  <li>
  <p>Display name: <strong>HTTPBin API</strong></p>
  </li>
  <li>
  <p>Name: <strong>httpbin-api</strong></p>
  </li>
  <li>
  <p>Web service URL: <em>Enter the URL for the web app that you copied earlier in this lab</em></p>
  <blockquote>
  <p><strong>Note</strong>: Depending on how you copy the URL, you might need to add an "http://" prefix to create a valid URL value.</p>
  </blockquote>
  </li>
  </ul>
  </li>
  <li>
  <p>Add a new <strong>operation</strong> to the recently created API with the following details:</p>
  <ul>
  <li>
  <p>Display name: <strong>Echo Headers</strong></p>
  </li>
  <li>
  <p>Name: <strong>echo-headers</strong></p>
  </li>
  <li>
  <p>URL: <strong>GET /</strong></p>
  </li>
  </ul>
  </li>
  <li>
  <p>Add a new <strong>Set Headers</strong> inbound policy to <strong>All Operations</strong> with the following details:</p>
  <ul>
  <li>
  <p>Name: <strong>source</strong></p>
  </li>
  <li>
  <p>Value: <strong>azure-api-mgmt</strong></p>
  </li>
  <li>
  <p>Action: <strong>append</strong></p>
  </li>
  </ul>
  </li>
  <li>
  <p>Update the <strong>Backend</strong> for the <strong>Echo Headers</strong> operation by overriding the <strong>Service URL</strong> and appending <strong>/headers</strong> to its current value.</p>
  <blockquote>
  <p><strong>Note</strong>: For example, if the current value is <strong><a href="http://httpapi*%5Byourname%5D*.azurewebsites.net" rel="nofollow">http://httpapi*[yourname]*.azurewebsites.net</a></strong>, the new value will be <strong><a href="http://httpapi*%5Byourname%5D*.azurewebsites.net/headers" rel="nofollow">http://httpapi*[yourname]*.azurewebsites.net/headers</a></strong></p>
  </blockquote>
  </li>
  <li>
  <p>Test the <strong>Echo Headers</strong> operation in the <strong>HTTPBin API</strong>, observing the results of the API request.</p>
  <blockquote>
  <p><strong>Note</strong>: Observe how there's many headers sent as part of your request that are echoed in the response. Specifically, you'll notice the new <strong>Source</strong> header that you created as part of this task.</p>
  </blockquote>
  </li>
  </ol>
  <h4><a id="user-content-task-3-manipulate-an-api-response" class="anchor" aria-hidden="true" href="#task-3-manipulate-an-api-response"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 3: Manipulate an API response</h4>
  <ol>
  <li>
  <p>Add a new <strong>operation</strong> to the API with the following details:</p>
  <ul>
  <li>
  <p>Display name: <strong>Get Legacy Data</strong></p>
  </li>
  <li>
  <p>Name: <strong>get-legacy-data</strong></p>
  </li>
  <li>
  <p>URL: <strong>GET /xml</strong></p>
  </li>
  </ul>
  </li>
  <li>
  <p>Test the <strong>Get Legacy Data</strong> operation in the <strong>HTTPBin API</strong>, observing the results of the API request.</p>
  <blockquote>
  <p><strong>Note</strong>: At this point, the results should be in XML format.</p>
  </blockquote>
  </li>
  <li>
  <p>Add a new custom outbound policy scoped to the <strong>Get Legacy Data</strong> operation by first locating the following block of XML content:</p>
  <pre><code>&lt;outbound&gt;
      &lt;base /&gt;
  &lt;/outbound&gt;
  </code></pre>
  </li>
  <li>
  <p>Replace that block of XML with the following XML, and then save the policy:</p>
  <pre><code>&lt;outbound&gt;
      &lt;base /&gt;
      &lt;xml-to-json kind="direct" apply="always" consider-accept-header="false" /&gt;
  &lt;/outbound&gt;
  </code></pre>
  </li>
  <li>
  <p>Test the <strong>Get Legacy Data</strong> operation in the <strong>HTTPBin API</strong>, observing the results of the API request.</p>
  <blockquote>
  <p><strong>Note</strong>: The new results are in JSON format.</p>
  </blockquote>
  </li>
  <li>
  <p>Use the <strong>Trace</strong> feature of the test tool to observe the request sent to the back-end service.</p>
  </li>
  </ol>
  <h4><a id="user-content-review-1" class="anchor" aria-hidden="true" href="#review-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Review</h4>
  <p>In this exercise, you built a proxy tier between your App Service resource and any developers who wish to make queries.</p>
  </article>