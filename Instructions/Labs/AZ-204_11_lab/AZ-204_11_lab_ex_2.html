<article>
<h4><a id="user-content-task-1-create-a-net-project" class="anchor" aria-hidden="true" href="#task-1-create-a-net-project"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 1: Create a .NET project</h4>
<ol>
<li>
<p>Using Visual Studio Code, open the <strong>Allfiles (F):\Allfiles\Labs\11\Starter\MessageProcessor</strong> folder.</p>
</li>
<li>
<p>Using a terminal, create a new .NET project named <strong>MessageProcessor</strong> in the current folder:</p>
<pre><code>dotnet new console --name MessageProcessor --output .
</code></pre>
<blockquote>
<p><strong>Note</strong>: The <strong>dotnet new</strong> command will create a new <strong>console</strong> project in a folder with the same name as the project.</p>
</blockquote>
</li>
<li>
<p>Using the same terminal, import version 12.0.0 of <strong>Azure.Storage.Queues</strong> from NuGet:</p>
<pre><code>dotnet add package Azure.Storage.Queues --version 12.0.0
</code></pre>
<blockquote>
<p><strong>Note</strong>: The <strong>dotnet add package</strong> command will add the <strong>Azure.Storage.Queues</strong> package from NuGet. For more information, go to <a href="https://www.nuget.org/packages/Azure.Storage.Queues/12.0.0" rel="nofollow">Azure.Storage.Queues</a>.</p>
</blockquote>
</li>
<li>
<p>Using the same terminal, build the .NET web application:</p>
<pre><code>dotnet build
</code></pre>
</li>
<li>
<p>Close the current terminal.</p>
</li>
</ol>
<h4><a id="user-content-task-2-write-code-to-access-azure-storage" class="anchor" aria-hidden="true" href="#task-2-write-code-to-access-azure-storage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 2: Write code to access Azure Storage</h4>
<ol>
<li>
<p>Open the <strong>Program.cs</strong> file in Visual Studio Code.</p>
</li>
<li>
<p>Delete all existing code in the <strong>Program.cs</strong> file.</p>
</li>
<li>
<p>Add the following <strong>using</strong> directives for libraries that will be referenced by the application:</p>
<pre><code>using Azure;
using Azure.Storage.Queues;
using Azure.Storage.Queues.Models;
using System;
using System.Threading.Tasks;
</code></pre>
</li>
<li>
<p>Create a new <strong>Program</strong> class with two constant string properties named <strong>storageConnectionString</strong> and <strong>messagequeue</strong>, and then create an asynchronous <strong>Main</strong> entry point method:</p>
<pre><code>public class Program
{
    private const string storageConnectionString = "&lt;storage-connection-string&gt;";
    private const string queueName = "messagequeue";

    public static async Task Main(string[] args)
    {
    }
}
</code></pre>
</li>
<li>
<p>Update the <strong>storageConnectionString</strong> string constant by setting its value to the&nbsp;<strong>Connection string</strong> of the storage account that you recorded earlier in this lab.</p>
</li>
</ol>
<h4><a id="user-content-task-3-validate-azure-storage-access" class="anchor" aria-hidden="true" href="#task-3-validate-azure-storage-access"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 3: Validate Azure Storage access</h4>
<ol>
<li>
<p>In the <strong>Main</strong> method, add the following block of code to connect to the storage account and to asynchronously create the queue if it doesn't already exist:</p>
<pre><code>QueueClient client = new QueueClient(storageConnectionString, queueName);        
await client.CreateAsync();
</code></pre>
</li>
<li>
<p>Still in the <strong>Main</strong> method, add the following block of code to render the Uniform Resource Identifier (URI) of the queue endpoint:</p>
<pre><code>Console.WriteLine($"---Account Metadata---");
Console.WriteLine($"Account Uri:\t{client.Uri}");
</code></pre>
</li>
<li>
<p>Save the&nbsp;<strong>Program.cs</strong>&nbsp;file.</p>
</li>
<li>
<p>Using a terminal, run the ASP.NET web application project:</p>
<pre><code>dotnet run
</code></pre>
<blockquote>
<p><strong>Note</strong>: If there are any build errors, review the <strong>Program.cs</strong> file in the <strong>Allfiles (F):\Allfiles\Labs\11\Solution\MessageProcessor</strong> folder.</p>
</blockquote>
</li>
<li>
<p>Observe the output from the currently running console application. The output contains metadata for the queue endpoint.</p>
</li>
<li>
<p>Close the current terminal.</p>
</li>
</ol>
<h4><a id="user-content-review-1" class="anchor" aria-hidden="true" href="#review-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Review</h4>
<p>In this exercise, you configured your .NET project to access the Storage service and manipulate a queue made available through the service.</p>
</article>