<article>
  <h4>
    <a
      id="user-content-task-1-open-the-azure-portal"
      class="anchor"
      aria-hidden="true"
      href="#task-1-open-the-azure-portal"
      ><svg
        class="octicon octicon-link"
        viewBox="0 0 16 16"
        version="1.1"
        width="16"
        height="16"
        aria-hidden="true"
      >
        <path
          fill-rule="evenodd"
          d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"
        ></path></svg></a
    >Task 1: Open the Azure portal
  </h4>
  <ol>
    <li>
      <p>
        Sign in to the Azure portal (<a
          href="https://portal.azure.com"
          rel="nofollow"
          >https://portal.azure.com</a
        >).
      </p>
      <blockquote>
        <p>
          <strong>Note</strong>: If this is your first time signing in to the
          Azure portal, a dialog box will display offering a tour of the portal.
          Select <strong>Get Started</strong> to skip the tour.
        </p>
      </blockquote>
    </li>
  </ol>
  <h4>
    <a
      id="user-content-task-2-create-a-storage-account"
      class="anchor"
      aria-hidden="true"
      href="#task-2-create-a-storage-account"
      ><svg
        class="octicon octicon-link"
        viewBox="0 0 16 16"
        version="1.1"
        width="16"
        height="16"
        aria-hidden="true"
      >
        <path
          fill-rule="evenodd"
          d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"
        ></path></svg></a
    >Task 2: Create a Storage account
  </h4>
  <ol>
    <li>
      <p>Create a new&nbsp;storage account&nbsp;with the following details:</p>
      <ul>
        <li>
          <p>New resource group: <strong>ManagedPlatform</strong></p>
        </li>
        <li>
          <p>
            Name: <em><em>imgstor</em>[yourname]</em>**
          </p>
        </li>
        <li>
          <p>Location: <strong>(US) East US</strong></p>
        </li>
        <li>
          <p>Performance: <strong>Standard</strong></p>
        </li>
        <li>
          <p>Account kind: <strong>StorageV2 (general purpose v2)</strong></p>
        </li>
        <li>
          <p>Replication: <strong>Locally-redundant storage (LRS)</strong></p>
        </li>
        <li>
          <p>Access tier: <strong>Hot</strong></p>
        </li>
      </ul>
    </li>
    <li>
      <p>
        Wait for Azure to finish creating the storage account before you move
        forward with the lab. You'll receive a notification when
        the&nbsp;account&nbsp;is created.
      </p>
    </li>
    <li>
      <p>
        Access the&nbsp;<strong>Access Keys</strong>&nbsp;blade of your newly
        created&nbsp;storage account&nbsp;instance.
      </p>
    </li>
    <li>
      <p>
        Record the value of the&nbsp;<strong>Connection string</strong> text
        box. You'll use this value later in this lab.
      </p>
    </li>
  </ol>
  <h4>
    <a
      id="user-content-task-3-upload-a-sample-blob"
      class="anchor"
      aria-hidden="true"
      href="#task-3-upload-a-sample-blob"
      ><svg
        class="octicon octicon-link"
        viewBox="0 0 16 16"
        version="1.1"
        width="16"
        height="16"
        aria-hidden="true"
      >
        <path
          fill-rule="evenodd"
          d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"
        ></path></svg></a
    >Task 3: Upload a sample blob
  </h4>
  <ol>
    <li>
      <p>
        Access the <em><em>imgstor</em>[yourname]</em>** storage account that
        you created earlier in this lab.
      </p>
    </li>
    <li>
      <p>
        In the <strong>Blob service</strong> section, select the
        <strong>Containers</strong> link.
      </p>
    </li>
    <li>
      <p>
        Create a new <strong>container</strong> with the following settings:
      </p>
      <ul>
        <li>
          <p>Name: <strong>images</strong></p>
        </li>
        <li>
          <p>
            Public access level:
            <strong>Blob (anonymous read access for blobs only)</strong>
          </p>
        </li>
      </ul>
    </li>
    <li>
      <p>
        Go to the new <strong>images</strong> container, and then use the
        <strong>Upload</strong> button to upload the
        <strong>grilledcheese.jpg</strong> file in the
        <strong>Allfiles (F):\Allfiles\Labs\01\Starter\Images</strong> folder on
        your lab machine.
      </p>
      <blockquote>
        <p>
          <strong>Note</strong>: We recommended that you enable the
          <strong>Overwrite if files already exist</strong> option.
        </p>
      </blockquote>
    </li>
  </ol>
  <h4>
    <a
      id="user-content-task-4-create-a-web-app"
      class="anchor"
      aria-hidden="true"
      href="#task-4-create-a-web-app"
      ><svg
        class="octicon octicon-link"
        viewBox="0 0 16 16"
        version="1.1"
        width="16"
        height="16"
        aria-hidden="true"
      >
        <path
          fill-rule="evenodd"
          d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"
        ></path></svg></a
    >Task 4: Create a web app
  </h4>
  <ol>
    <li>
      <p>Create a new web app with the following details:</p>
      <ul>
        <li>
          <p>Existing resource group: <strong>ManagedPlatform</strong></p>
        </li>
        <li>
          <p>
            Web App name: <em><em>imgapi</em>[yourname]</em>**
          </p>
        </li>
        <li>
          <p>Publish: <strong>Code</strong></p>
        </li>
        <li>
          <p>Runtime stack: <strong>.NET Core 3.1 (LTS)</strong></p>
        </li>
        <li>
          <p>Operating System: <strong>Windows</strong></p>
        </li>
        <li>
          <p>Region: <strong>East US</strong></p>
        </li>
        <li>
          <p>New App Service plan: <strong>ManagedPlan</strong></p>
        </li>
        <li>
          <p>SKU and size: <strong>Standard (S1)</strong></p>
        </li>
        <li>
          <p>Application Insights: <strong>Disabled</strong></p>
        </li>
      </ul>
    </li>
    <li>
      <p>
        Wait for Azure to finish creating the web app before you move forward
        with the lab. You'll receive a notification when the&nbsp;app&nbsp;is
        created.
      </p>
    </li>
  </ol>
  <h4>
    <a
      id="user-content-task-5-configure-the-web-app"
      class="anchor"
      aria-hidden="true"
      href="#task-5-configure-the-web-app"
      ><svg
        class="octicon octicon-link"
        viewBox="0 0 16 16"
        version="1.1"
        width="16"
        height="16"
        aria-hidden="true"
      >
        <path
          fill-rule="evenodd"
          d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"
        ></path></svg></a
    >Task 5: Configure the web app
  </h4>
  <ol>
    <li>
      <p>
        Access the <em><em>imgapi</em>[yourname]</em>** web app that you created
        earlier in this lab.
      </p>
    </li>
    <li>
      <p>
        In the <strong>Settings</strong> section, find the
        <strong>Configuration</strong> section, and then create a new
        application setting by using the following details:
      </p>
      <ul>
        <li>
          <p>Name: <strong>StorageConnectionString</strong></p>
        </li>
        <li>
          <p>
            Value:
            <em
              ><strong
                >Storage Connection String copied earlier in this lab</strong
              ></em
            >
          </p>
        </li>
        <li>
          <p>Deployment slot setting: <strong>Not selected</strong></p>
        </li>
      </ul>
    </li>
    <li>
      <p>Save your changes to the application settings.</p>
    </li>
    <li>
      <p>
        In the <strong>Settings</strong> section, find the
        <strong>Properties</strong> section.
      </p>
    </li>
    <li>
      <p>
        In the <strong>Properties</strong> section, copy the value of the
        <strong>URL</strong> text box. You'll use this value later in the lab.
      </p>
      <blockquote>
        <p>
          <strong>Note</strong>: At this point, the web server at this URL will
          return a 404 error. You have not deployed any code to the Web App yet.
          You will deploy code to the Web App later in this lab.
        </p>
      </blockquote>
    </li>
  </ol>
  <h4>
    <a
      id="user-content-task-6-deploy-an-aspnet-web-application-to-web-apps"
      class="anchor"
      aria-hidden="true"
      href="#task-6-deploy-an-aspnet-web-application-to-web-apps"
      ><svg
        class="octicon octicon-link"
        viewBox="0 0 16 16"
        version="1.1"
        width="16"
        height="16"
        aria-hidden="true"
      >
        <path
          fill-rule="evenodd"
          d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"
        ></path></svg></a
    >Task 6: Deploy an ASP.NET web application to Web Apps
  </h4>
  <ol>
    <li>
      <p>
        Using Visual Studio Code, open the web application in the
        <strong>Allfiles (F):\Allfiles\Labs\01\Starter\API</strong> folder.
      </p>
    </li>
    <li>
      <p>
        Open the <strong>Controllers\ImagesController.cs</strong> file, and then
        observe the code in each of the methods.
      </p>
    </li>
    <li>
      <p>Open the Windows Terminal application.</p>
    </li>
    <li>
      <p>Sign in to the Azure CLI by using your Azure credentials:</p>
      <pre><code>az login
  </code></pre>
    </li>
    <li>
      <p>
        List all the apps in your <strong>ManagedPlatform</strong> resource
        group:
      </p>
      <pre><code>az webapp list --resource-group ManagedPlatform
  </code></pre>
    </li>
    <li>
      <p>Find the apps that have the <strong>imgapi*</strong> prefix:</p>
      <pre><code>az webapp list --resource-group ManagedPlatform --query "[?starts_with(name, 'imgapi')]"
  </code></pre>
    </li>
    <li>
      <p>
        Print only the name of the single app that has the
        <strong>imgapi*</strong> prefix:
      </p>
      <pre><code>az webapp list --resource-group ManagedPlatform --query "[?starts_with(name, 'imgapi')].{Name:name}" --output tsv
  </code></pre>
    </li>
    <li>
      <p>
        Change the current directory to the
        <strong>Allfiles (F):\Allfiles\Labs\01\Starter\API</strong> directory
        that contains the lab files:
      </p>
      <pre><code>cd F:\Allfiles\Labs\01\Starter\API\
  </code></pre>
    </li>
    <li>
      <p>
        Deploy the <strong>api.zip</strong> file to the web app that you created
        earlier in this lab:
      </p>
      <pre><code>az webapp deployment source config-zip --resource-group ManagedPlatform --src api.zip --name &lt;name-of-your-api-app&gt;
  </code></pre>
      <blockquote>
        <p>
          <strong>Note</strong>: Replace the
          <em>&lt;name-of-your-api-app&gt;</em> placeholder with the name of the
          web app that you created earlier in this lab. You recently queried
          this app’s name in the previous steps.
        </p>
      </blockquote>
    </li>
    <li>
      <p>
        Access the <em><em>imgapi</em>[yourname]</em>** web app that you created
        earlier in this lab. Open the <em><em>imgapi</em>[yourname]</em>** web
        app in your browser.
      </p>
    </li>
    <li>
      <p>
        Perform a GET request to the root of the website, and then observe the
        JavaScript Object Notation (JSON) array that's returned. This array
        should contain the URL for your single uploaded image in your storage
        account.
      </p>
    </li>
    <li>
      <p>
        Close the currently running Visual Studio Code and Windows Terminal
        applications.
      </p>
    </li>
  </ol>
  <h4>
    <a id="user-content-review" class="anchor" aria-hidden="true" href="#review"
      ><svg
        class="octicon octicon-link"
        viewBox="0 0 16 16"
        version="1.1"
        width="16"
        height="16"
        aria-hidden="true"
      >
        <path
          fill-rule="evenodd"
          d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"
        ></path></svg></a
    >Review
  </h4>
  <p>
    In this exercise, you created a web app in Azure and then deployed your
    ASP.NET web application to Web Apps by using the Azure CLI and the Kudu zip
    file deployment utility.
  </p>
</article>
