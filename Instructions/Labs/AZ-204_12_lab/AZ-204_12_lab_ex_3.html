<article>
  <h4><a id="user-content-task-1-deploy-an-application-to-the-web-app" class="anchor" aria-hidden="true" href="#task-1-deploy-an-application-to-the-web-app"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 1: Deploy an application to the web app</h4>
  <ol>
  <li>
  <p>Open Visual Studio Code.</p>
  </li>
  <li>
  <p>In Visual Studio Code, open the <strong>Allfiles (F):\Allfiles\Labs\12\Starter\Api</strong> folder.</p>
  </li>
  <li>
  <p>Use the Explorer in Visual Studio Code to open a new terminal with the context set to the current working directory.</p>
  </li>
  <li>
  <p>Sign in to the Azure Command-Line Interface (CLI) by using your Azure credentials:</p>
  <pre><code>az login
  </code></pre>
  </li>
  <li>
  <p>List all the apps in your <strong>MonitoredAssets</strong> resource group:</p>
  <pre><code>az webapp list --resource-group MonitoredAssets
  </code></pre>
  </li>
  <li>
  <p>Find the apps that have the prefix <strong>smpapi*</strong>:</p>
  <pre><code>az webapp list --resource-group MonitoredAssets --query "[?starts_with(name, 'smpapi')]"
  </code></pre>
  </li>
  <li>
  <p>Print only the name of the single app that has the prefix <strong>smpapi*</strong>:</p>
  <pre><code>az webapp list --resource-group MonitoredAssets --query "[?starts_with(name, 'smpapi')].{Name:name}" --output tsv
  </code></pre>
  </li>
  <li>
  <p>Change the current directory to the <strong>Allfiles (F):\Allfiles\Labs\12\Starter</strong> directory that contains the lab files:</p>
  <pre><code>cd F:\Allfiles\Labs\12\Starter\
  </code></pre>
  </li>
  <li>
  <p>Deploy the <strong>api.zip</strong> file to the web app that you created earlier in this lab:</p>
  <pre><code>az webapp deployment source config-zip --resource-group MonitoredAssets --src api.zip --name &lt;name-of-your-api-app&gt;
  </code></pre>
  <blockquote>
  <p><strong>Note</strong>: Replace the <em>name-of-your-api-app</em> placeholder with the name of the web app that you created earlier in this lab. You recently queried this appâ€™s name in the previous steps.</p>
  </blockquote>
  </li>
  <li>
  <p>Return to your currently open browser window that's displaying the Azure portal.</p>
  </li>
  <li>
  <p>Access the <em><strong>smpapi*</strong>[yourname]</em>** web app that you created earlier in this lab.</p>
  </li>
  <li>
  <p>Open the <em><strong>smpapi*</strong>[yourname]</em>** web app in your browser.</p>
  </li>
  <li>
  <p>Perform a GET request to the <strong>/weatherforecast</strong> relative path of the website, and then find the JavaScript Object Notation (JSON) array that's returned as a result of using the API.</p>
  <blockquote>
  <p><strong>Note</strong>: For example, if your URL is <a href="https://smpapistudent.azurewebsites.net" rel="nofollow">https://smpapistudent.azurewebsites.net</a>, the new URL would be <a href="https://smpapistudent.azurewebsites.net/weatherforecast" rel="nofollow">https://smpapistudent.azurewebsites.net/weatherforecast</a>.</p>
  </blockquote>
  </li>
  </ol>
  <h4><a id="user-content-task-2-configure-in-depth-metric-collection-for-web-apps" class="anchor" aria-hidden="true" href="#task-2-configure-in-depth-metric-collection-for-web-apps"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 2: Configure in-depth metric collection for Web Apps</h4>
  <ol>
  <li>
  <p>Return to your currently open browser window that's displaying the Azure portal.</p>
  </li>
  <li>
  <p>Access the <em><strong>smpapi*</strong>[yourname]</em>** web app that you created earlier in this lab.</p>
  </li>
  <li>
  <p>Go to the <strong>Application Insights</strong> configuration section.</p>
  </li>
  <li>
  <p><strong>Enable</strong> Application Insights instrumentation for <strong>.NET</strong> by using the following settings:</p>
  <ul>
  <li>
  <p>Collection level: <strong>Recommended</strong></p>
  </li>
  <li>
  <p>Profiler: <strong>On</strong></p>
  </li>
  <li>
  <p>Snapshot debugger: <strong>Off</strong></p>
  </li>
  <li>
  <p>SQL Commands: <strong>Off</strong></p>
  </li>
  </ul>
  </li>
  <li>
  <p>Save your Application Insights instrumentation configuration.</p>
  </li>
  <li>
  <p>Open the <em><strong>smpapi*</strong>[yourname]</em>** web app in your browser.</p>
  </li>
  <li>
  <p>Perform a GET request to the <strong>/weatherforecast</strong> relative path of the website, and then observe the JSON array that's returned as a result of using the API.</p>
  <blockquote>
  <p><strong>Note</strong>: For example, if your URL is <a href="https://smpapistudent.azurewebsites.net" rel="nofollow">https://smpapistudent.azurewebsites.net</a>, the new URL would be <a href="https://smpapistudent.azurewebsites.net/weatherforecast" rel="nofollow">https://smpapistudent.azurewebsites.net/weatherforecast</a>.</p>
  </blockquote>
  </li>
  <li>
  <p>Record the URL that you used to access the JSON array.</p>
  <blockquote>
  <p><strong>Note</strong>: Using the example from the previous step, you would record the URL <code>https://smpapistudent.azurewebsites.net/weatherforecast</code>.</p>
  </blockquote>
  </li>
  </ol>
  <h4><a id="user-content-task-3-get-updated-metrics-in-application-insights" class="anchor" aria-hidden="true" href="#task-3-get-updated-metrics-in-application-insights"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 3: Get updated metrics in Application Insights</h4>
  <ol>
  <li>
  <p>Return to your currently open browser window that's displaying the Azure portal.</p>
  </li>
  <li>
  <p>Access the <em><em>instrm</em>[yourname]</em>** Application Insights account that you created earlier in this lab.</p>
  </li>
  <li>
  <p>From the <strong>Application Insights</strong> blade, find the metrics displayed in the tiles in the center of the blade. Specifically, find the number of server requests that have occurred and the average server response time.</p>
  <blockquote>
  <p><strong>Note</strong>: It can take up to five minutes to observe requests in the Application Insights metrics charts.</p>
  </blockquote>
  </li>
  </ol>
  <h4><a id="user-content-task-4-view-real-time-metrics-in-application-insights" class="anchor" aria-hidden="true" href="#task-4-view-real-time-metrics-in-application-insights"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Task 4: View real-time metrics in Application Insights</h4>
  <ol>
  <li>
  <p>Return to your currently open browser window that's displaying the Azure portal.</p>
  </li>
  <li>
  <p>Access the <em><em>instrm</em>[yourname]</em>** Application Insights account that you created earlier in this lab.</p>
  </li>
  <li>
  <p>Open the <strong>Live Metrics Stream</strong> blade for your account.</p>
  </li>
  <li>
  <p>Open a new <strong>Microsoft Edge</strong> browser window, go to the URL that you recorded earlier in this lab, and then observe the JSON array result.</p>
  </li>
  <li>
  <p>Return to your currently open browser window that's displaying the Azure portal, and then observe the updated <strong>Live Metrics Stream</strong> blade.</p>
  <blockquote>
  <p><strong>Note</strong>: The <strong>Incoming Requests</strong> section should update in seconds, showing the requests that you made to the web app.</p>
  </blockquote>
  </li>
  </ol>
  <h4><a id="user-content-review-2" class="anchor" aria-hidden="true" href="#review-2"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Review</h4>
  <p>In this exercise, you deployed your web app to App Service and monitored your metrics from the same Application Insights instance.</p>
  </article>